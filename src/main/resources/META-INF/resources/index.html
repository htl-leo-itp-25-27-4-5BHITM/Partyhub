<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Demo Quarkus Static Site</title>
    <link href="style.css" rel="stylesheet">
</head>
<body>
<script src="script.js" defer></script>

<h2>Filter parties by Title</h2>

<form id="filterForm">
    <label for="filter">Filter type</label>
    <select id="filter" name="filter">
        <option value="title">Title</option>
        <option value="Date">Date</option>
        <option value="Category">Category</option>
        <option value="Party">Party</option>
    </select>

    <label for="param">Search term</label>
    <input type="text" id="param" name="param" placeholder="e.g. music" required>

    <button type="submit">Search</button>
</form>

<h3>Result</h3>
<pre id="output"></pre>

<a href="./homepage/homepage.html">Homepage</a>

<h1>Data</h1>
<h2>Users</h2>
<table id="userTable">
    <thead>
    <tr>
        <th>User ID</th>
        <th>Name</th>
        <th>Email</th>
    </tr>
    </thead>
    <tbody>
    </tbody>
</table>

<h2>Parties</h2>
<table id="partyTable">
    <thead>
    <tr>
        <th>Party ID</th>
        <th>Party Title</th>
        <th>Category ID</th>
        <th>Date start</th>
        <th>Date end</th>
        <th>Max people</th>
        <th>Min age</th>
        <th>Max age</th>
    </tr>
    </thead>
    <tbody>
    </tbody>
</table>




<h1>File Upload</h1>
<form action="/api/media/upload/1" method="post" enctype="multipart/form-data">
    <div>
        <input type="file" name="file">
    </div>
    <button onclick="addFile(); return false;">Add file</button>
    <button type="submit">Submit</button>
</form>

<h1>AddParty</h1>
<form action="/api/party/add" method="post" enctype="multipart/form-data">
    <div>
        <input type="number" name="category_id">
        <input type="datetime-local" name="time_start">
        <input type="datetime-local" name="time_end">
        <input type="number" name="max_people">
        <input type="number" name="min_age">
        <input type="number" name="max_age">
    </div>
    <button type="submit">Submit</button>
</form>

<h1>Geolocation:</h1>
<div id="demo"></div>

</body>
</html>
<script>
    document.getElementById('filterForm').addEventListener('submit', async e => {
        e.preventDefault();

        const filter = document.getElementById('filter').value;
        const param   = document.getElementById('param').value;
        const formData = new FormData();
        formData.append('param', param);
        console.log(formData.get('param'))

        const url = `api/party/filter?filter=${encodeURIComponent(filter)}`;

        try {
            const response = await fetch(url, {
                method: 'POST',
                headers: {
                },
                body: formData
            });

            if (!response.ok) throw new Error(`HTTP ${response.status}`);

            const data = await response.json();
            document.getElementById('output').textContent = JSON.stringify(data, null, 2);
        } catch (err) {
            document.getElementById('output').textContent = `Error: ${err.message}`;
        }
    });
</script>